<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<title>CHILAB + MAXCNC | Art, Design &amp; Fabrication</title>
<!-- Set flag before loading any scripts -->
<script>window.THREE_ALREADY_IMPORTED = true;</script>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow-x: hidden;
            font-family: 'Roboto', sans-serif;
            background-color: #101014;
            color: #f1f1f3;
            padding-top: 0 !important;
            margin-top: 0 !important;
        }
        
        .studio-font {
            font-family: 'Montserrat', sans-serif;
        }
        
        .hero-section {
            height: 100vh;
            position: relative;
            padding-top: 80px; /* Adjusted to account for fixed navbar */
        }
        
        .particle-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, #65CCF3, #FFFFFF, #65CCF3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .gradient-border {
            position: relative;
        }
        
        .gradient-border::before {
            content: '';
            position: absolute;
            inset: -2px;
            z-index: -1;
            background: linear-gradient(90deg, #65CCF3, #FFFFFF, #65CCF3);
            border-radius: inherit;
            padding: 2px;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
        }
        
        .floating {
            animation: floating 8s ease-in-out infinite;
        }
        
        .floating-2 {
            animation: floating 6s ease-in-out infinite 2s;
        }
        
        .floating-3 {
            animation: floating 7s ease-in-out infinite 1s;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        
        .material-card {
            background: linear-gradient(135deg, rgba(101, 204, 243, 0.1) 0%, rgba(255, 255, 255, 0.1) 50%, rgba(101, 204, 243, 0.1) 100%);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .chicago-glow {
            text-shadow: 0 0 10px rgba(101, 204, 243, 0.7);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(101, 204, 243, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(101, 204, 243, 0); }
            100% { box-shadow: 0 0 0 0 rgba(101, 204, 243, 0); }
        }
        
        .rotate-x {
            animation: rotate-x 20s infinite linear;
            transform-style: preserve-3d;
        }
        
        @keyframes rotate-x {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(360deg); }
        }
        
        .material-display {
            perspective: 1000px;
        }
        
        .display-surface {
            background: linear-gradient(45deg, rgba(101, 204, 243, 0.2), rgba(255, 255, 255, 0.4));
            box-shadow: inset 0 0 50px rgba(101, 204, 243, 0.5);
            border-radius: 50%;
            filter: blur(0.5px);
        }
        
        .nav-link {
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #65CCF3, #FFFFFF, #65CCF3);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem !important;
                line-height: 1.2 !important;
            }
            
            h2 {
                font-size: 2rem !important;
            }
            
            .hero-section {
                padding-top: 80px;
                height: auto;
                min-height: 100vh;
            }
            
            .material-card {
                padding: 1rem !important;
            }
            
            .display-3d-mobile {
                height: 250px !important;
                margin-top: 2rem;
                margin-bottom: 2rem;
            }
            
            .button-text-mobile {
                font-size: 0.875rem !important;
                padding: 0.5rem 1rem !important;
            }
            
            .mobile-grid-1 {
                grid-template-columns: 1fr !important;
            }
            
            .mobile-mt-6 {
                margin-top: 1.5rem !important;
            }
            
            .mobile-py-12 {
                padding-top: 3rem !important;
                padding-bottom: 3rem !important;
            }
            
            .mobile-hidden {
                display: none !important;
            }
            
            .mobile-pt-4 {
                padding-top: 1rem !important;
            }
            
            .mobile-text-sm {
                font-size: 0.875rem !important;
            }
            
            .mobile-px-4 {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
        }
        
        .scroll-down {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0) translateX(-50%);
            }
            40% {
                transform: translateY(-20px) translateX(-50%);
            }
            60% {
                transform: translateY(-10px) translateX(-50%);
            }
        }
        
        .feature-panel {
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.6s ease-out;
        }
        
        .feature-panel.visible {
            transform: translateY(0);
            opacity: 1;
        }
        
        .material-effect {
            position: relative;
        }
        
        .material-effect::before {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(to bottom, rgba(101, 204, 243, 0.3), transparent);
            transform: perspective(500px) rotateX(60deg) scaleY(0.8);
            filter: blur(15px);
            z-index: -1;
        }
        
        .scanline {
            position: relative;
            overflow: hidden;
        }
        
        .scanline::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                rgba(101, 204, 243, 0.03) 50%,
                transparent 100%
            );
            animation: scanline 5s linear infinite;
            pointer-events: none;
        }
        
        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        
        /* Floating 3D Shapes */
        .floating-cube {
            animation: floating 8s ease-in-out infinite, rotate-x 20s infinite linear;
            transform-style: preserve-3d;
        }
        
        .floating-pyramid {
            animation: floating 7s ease-in-out infinite 1s, rotate-y 25s infinite linear reverse;
            transform-style: preserve-3d;
        }
        
        .floating-torus {
            animation: floating 9s ease-in-out infinite 2s, rotate-x 30s infinite linear reverse;
            transform-style: preserve-3d;
        }
        
        @keyframes rotate-y {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .noise::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            z-index: -1;
        }
        
        /* Touch optimizations for mobile */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
        }
        
        /* Fix content that might overflow on small screens */
        .overflow-wrap-anywhere {
            overflow-wrap: anywhere;
            word-break: break-word;
        }
        
        /* Better spacing on mobile */
        @media (max-width: 768px) {
            .section-mobile {
                padding: 3rem 1rem !important;
            }
            
            .gap-mobile-4 {
                gap: 1rem !important;
            }
            
            .text-mobile-base {
                font-size: 1rem !important;
                line-height: 1.5 !important;
            }
            
            .card-mobile {
                margin-bottom: 1.5rem !important;
            }
            
            /* Better form inputs on mobile */
            input, textarea, select {
                font-size: 16px !important; /* Prevents iOS zoom on focus */
            }
        }
        
        /* Fix for top margin issue */
        html, body {
            margin: 0;
            padding: 0;
        }
        
        .nav-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

/* Mobile fixes */
@media (max-width: 768px) {
  .nav-fixed { position: relative !important; }
  .view-portfolio-btn { font-size: 0.875rem !important; padding: 0.5rem 1rem !important; }
}

    </style>
</head>
<body class="pt-0 mt-0">
<!-- Background Animation -->
<div class="particle-bg" id="vanta-bg"></div>
<!-- Navigation with Mobile Menu -->
<nav class="nav-fixed bg-black bg-opacity-60 backdrop-filter backdrop-blur-lg border-b border-gray-800">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between h-20 items-center">
<div class="flex-shrink-0 flex items-center">
<span class="text-2xl font-bold gradient-text studio-font">CHILAB + MAXCNC</span>
</div>
<div class="hidden md:block">
<div class="ml-10 flex items-center space-x-8">
<a class="nav-link px-3 py-2 text-sm font-medium" href="#">Home</a>
<a class="nav-link px-3 py-2 text-sm font-medium" href="#services">Services</a>
<a class="nav-link px-3 py-2 text-sm font-medium" href="#projects">Projects</a>
<a class="nav-link px-3 py-2 text-sm font-medium" href="#about">About</a>
<a class="nav-link px-3 py-2 text-sm font-medium" href="#contact">Contact</a>
</div>
</div>
<div class="flex items-center space-x-4">
<button class="view-portfolio-btn relative overflow-hidden group bg-transparent border-2 border-blue-400 hover:border-white text-white px-6 py-2 rounded-full font-medium transition-all duration-500 hidden md:block">
<span class="relative z-10">View Portfolio</span>
<span class="absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 opacity-0 group-hover:opacity-100 transition-all duration-500"></span>
</button>
<!-- Mobile menu button -->
<button class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-white hover:text-blue-400 focus:outline-none" id="mobileMenuButton">
<svg class="h-6 w-6" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</button>
</div>
</div>
</div>
<!-- Mobile menu, show/hide based on menu state -->
<div class="md:hidden hidden px-2 pt-2 pb-3 space-y-1 bg-black bg-opacity-90 backdrop-filter backdrop-blur-lg" id="mobileMenu">
<a class="block px-3 py-4 rounded-md text-base font-medium text-white hover:bg-blue-700 hover:text-white border-b border-gray-800" href="#">Home</a>
<a class="block px-3 py-4 rounded-md text-base font-medium text-white hover:bg-blue-700 hover:text-white border-b border-gray-800" href="#services">Services</a>
<a class="block px-3 py-4 rounded-md text-base font-medium text-white hover:bg-blue-700 hover:text-white border-b border-gray-800" href="#projects">Projects</a>
<a class="block px-3 py-4 rounded-md text-base font-medium text-white hover:bg-blue-700 hover:text-white border-b border-gray-800" href="#about">About</a>
<a class="block px-3 py-4 rounded-md text-base font-medium text-white hover:bg-blue-700 hover:text-white" href="#contact">Contact</a>
</div>
</nav>
<!-- Hero Section with Material Display -->
<section class="hero-section flex items-center justify-center relative overflow-hidden px-4">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
<div class="text-center lg:text-left">
<div class="relative inline-block mb-8">
<div class="absolute -inset-1 bg-gradient-to-r from-white to-white rounded-xl blur opacity-75"></div>
<span class="relative px-4 py-2 bg-black rounded-lg text-sm font-medium studio-font">
                        ART • DESIGN • FABRICATION
                    </span>
</div>
<h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight studio-font">
<span class="gradient-text">Crafting</span> Vision Into Reality
                </h1>
<p class="text-xl text-gray-300 max-w-2xl mb-10 mobile-text-sm">
                    CHILAB + MAXCNC blends traditional craftsmanship with innovative technology to create bespoke art installations and architectural elements that transcend conventional boundaries.
                </p>
<div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
<button class="view-portfolio-btn relative overflow-hidden group px-8 py-4 rounded-full font-medium text-lg bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 button-text-mobile">
<span class="relative z-10">Explore Projects</span>
<span class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-all duration-500"></span>
</button>
<button class="px-8 py-4 rounded-full font-medium text-lg border-2 border-blue-400 hover:border-white text-white hover:text-blue-200 transition-all duration-300 transform hover:scale-105 button-text-mobile">
<i class="fas fa-play mr-2"></i> View Process
                    </button>
</div>
</div>
<!-- Material Display -->
<div class="relative flex items-center justify-center h-96 lg:h-auto display-3d-mobile">
<div class="absolute w-64 h-64 md:w-80 md:h-80 lg:w-96 lg:h-96">
<div class="floating-torus h-full w-full">
<!-- Three.js will render here -->
<canvas class="h-full w-full" id="bronzeTorusCanvas"></canvas>
</div>
</div>
<div class="material-card h-64 w-64 md:h-80 md:w-80 lg:h-96 lg:w-96 rounded-full opacity-90 relative">
<div class="absolute inset-0 flex items-center justify-center">
<div class="display-surface h-3/4 w-3/4 flex items-center justify-center">
<div class="text-center p-6">
<h3 class="text-2xl font-bold mb-2 gradient-text studio-font">CHILAB + MAXCNC</h3>
<p class="text-xs text-gray-300">EST. 2013 • CHICAGO</p>
<div class="mt-4 h-1 w-16 mx-auto bg-gradient-to-r from-blue-400 to-white"></div>
</div>
</div>
</div>
<div class="absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-1/2 h-2 bg-blue-400 rounded-full blur-md opacity-60"></div>
</div>
<!-- Floating 3D Shapes -->
<div class="absolute -left-10 top-1/4 w-16 h-16 mobile-hidden">
<div class="floating-cube h-full w-full">
<canvas class="h-full w-full" id="materialCubeCanvas"></canvas>
</div>
</div>
<div class="absolute -right-10 bottom-1/3 w-20 h-20 mobile-hidden">
<div class="floating-pyramid h-full w-full">
<canvas class="h-full w-full" id="materialPyramidCanvas"></canvas>
</div>
</div>
</div>
<!-- Scroll Down Indicator -->
<div class="scroll-down lg:hidden">
<a class="text-blue-400 hover:text-blue-600 transition-colors duration-300" href="#services">
<i class="fas fa-chevron-down text-2xl"></i>
</a>
</div>
</div>
</section>
<!-- Services Section -->
<section class="py-20 relative overflow-hidden px-4 section-mobile" id="services">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="text-center mb-16">
<h2 class="text-3xl md:text-5xl font-bold mb-4 studio-font">
<span class="gradient-text">Material</span> Expertise
                </h2>
<p class="text-xl text-gray-300 max-w-4xl mx-auto">
                    We combine time-honored techniques with cutting-edge technology to transform raw materials into extraordinary experiences.
                </p>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mobile-grid-1">
<!-- Service 1 - Steel (Canvas removed) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-500 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-hammer text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Steel</h3>
</div>
</div>
<p class="text-gray-300 mt-6">
    Expert craftsmanship in precision fabricated steel, intricate patination to large-scale architectural elements.
</p>
</div>

<!-- Service 2 - Wood (Canvas removed) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 delay-100 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-600 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-tree text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Wood</h3>
</div>
</div>
<p class="text-gray-300 mt-6">
    Custom woodworking with precision CNC milling, hand finishing and traditional joinery techniques for elegant results.
</p>
</div>

<!-- Service 3 - Plastics (Canvas removed) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 delay-200 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-700 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-700 to-blue-800 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-vector-square text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Plastics</h3>
</div>
</div>
<p class="text-gray-300 mt-6">
    Advanced polymer fabrication with thermal forming, precision cutting, and modern finishing for functional and artistic applications.
</p>
</div>

<!-- Service 4 - Composites (Canvas removed) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 delay-300 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-400 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-layer-group text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Composites</h3>
</div>
</div>
<p class="text-gray-300 mt-6">
    Innovative composite material work combining carbon fiber, fiberglass, and resins for high-performance, lightweight components.
</p>
</div>

<!-- Service 5 - Bronze (Keep as is) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-500 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-gem text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Bronze</h3>
</div>
</div>
<p class="text-gray-300 mt-6">Artisanal bronze patinas and custom castings for durable, elegant finishes.</p>
</div>

<!-- Service 6 - Aluminum (Keep as is) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-500 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-industry text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Aluminum</h3>
</div>
</div>
<p class="text-gray-300 mt-6">Precision aluminum fabrication with CNC and decorative finishing.</p>
</div>

<!-- Service 7 - Glass (Keep as is) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-500 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-glass-whiskey text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Glass</h3>
</div>
</div>
<p class="text-gray-300 mt-6">Expert glass forming and casting techniques for sculptural and architectural uses.</p>
</div>

<!-- Service 8 - Resins (Keep as is) -->
<div class="feature-panel material-card p-8 rounded-2xl transition-all duration-700 hover:transform hover:scale-105 card-mobile">
<div class="relative">
<div class="absolute -left-2 -top-2 w-12 h-12 bg-blue-500 rounded-full opacity-20 blur-sm"></div>
<div class="relative flex items-center">
<div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4">
<i class="fas fa-flask text-xl"></i>
</div>
<h3 class="text-2xl font-bold gradient-text studio-font">Resins</h3>
</div>
</div>
<p class="text-gray-300 mt-6">Advanced resin casting and composite fabrication for lightweight strength.</p>
</div>
</div>
</div>
</section>
<!-- Projects Showcase Section -->
<section class="py-20 relative overflow-hidden px-4 section-mobile" id="projects">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="text-center mb-16">
<h2 class="text-3xl md:text-5xl font-bold mb-4 studio-font">
<span class="gradient-text">Featured</span> Projects
                </h2>
<p class="text-xl text-gray-300 max-w-4xl mx-auto">
                    Our portfolio of innovative projects that merge art, design, and fabrication in meaningful ways.
                </p>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mobile-grid-1">
<!-- Project 1 - Uber -->
<div class="feature-panel material-card rounded-2xl overflow-hidden transition-all duration-700 delay-75 hover:transform hover:scale-105 card-mobile">
<div class="relative h-64">
<div class="w-full h-full">
    <canvas class="absolute inset-0 w-full h-full bg-gray-900" id="uberCanvas"></canvas>
</div>
<div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent"></div>
<div class="absolute bottom-0 left-0 p-6">
<h3 class="text-2xl font-bold mb-1">Uber Headquarters</h3>
<span class="text-sm text-blue-400">Architectural Installation</span>
</div>
</div>
<div class="p-6">
<p class="text-gray-300 mb-4">Grand spiral staircase and parametric feature wall for Uber's Chicago headquarters in the historic Old Post Office.</p>
<button class="text-blue-400 font-medium flex items-center group">
<span>View Project</span>
<i class="fas fa-arrow-right ml-2 group-hover:ml-3 transition-all duration-300"></i>
</button>
</div>
</div>
<!-- Project 2 - St. Nicholas -->
<div class="feature-panel material-card rounded-2xl overflow-hidden transition-all duration-700 delay-150 hover:transform hover:scale-105 card-mobile">
<div class="relative h-64">
<div class="w-full h-full">
    <canvas class="absolute inset-0 w-full h-full bg-gray-900" id="stNicholasCanvas"></canvas>
</div>
<div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent"></div>
<div class="absolute bottom-0 left-0 p-6">
<h3 class="text-2xl font-bold mb-1">St. Nicholas Church</h3>
<span class="text-sm text-blue-400">Sacred Glasswork</span>
</div>
</div>
<div class="p-6">
<p class="text-gray-300 mb-4">Custom glass crosses and bronze fixtures for the Santiago Calatrava-designed Greek Orthodox Church at the World Trade Center.</p>
<button class="text-blue-400 font-medium flex items-center group">
<span>View Project</span>
<i class="fas fa-arrow-right ml-2 group-hover:ml-3 transition-all duration-300"></i>
</button>
</div>
</div>
<!-- Project 3 - Knoll -->
<div class="feature-panel material-card rounded-2xl overflow-hidden transition-all duration-700 delay-300 hover:transform hover:scale-105 card-mobile">
<div class="relative h-64">
<div class="w-full h-full">
    <canvas class="absolute inset-0 w-full h-full bg-gray-900" id="knollCanvas"></canvas>
</div>
<div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent"></div>
<div class="absolute bottom-0 left-0 p-6">
<h3 class="text-2xl font-bold mb-1">Knoll Showroom</h3>
<span class="text-sm text-blue-400">Bronze Installation</span>
</div>
</div>
<div class="p-6">
<p class="text-gray-300 mb-4">Architectural sculpture and 24-foot solid bronze recreation of the iconic Antenna Table for Knoll's Chicago showroom.</p>
<button class="text-blue-400 font-medium flex items-center group">
<span>View Project</span>
<i class="fas fa-arrow-right ml-2 group-hover:ml-3 transition-all duration-300"></i>
</button>
</div>
</div>
</div>
<div class="text-center mt-12">
<button class="relative overflow-hidden group px-8 py-4 rounded-full font-medium text-lg bg-transparent border-2 border-blue-400 hover:border-white text-white transition-all duration-300 transform hover:scale-105">
<span class="relative z-10">View All Projects</span>
<span class="absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 opacity-0 group-hover:opacity-100 transition-all duration-500"></span>
</button>
</div>
<!-- Material Technology Visualization -->
<div class="mt-20 relative h-96 rounded-3xl overflow-hidden material-effect scanline noise">
<div class="w-full h-full">
    <canvas class="absolute inset-0 w-full h-full" id="materialVizCanvas"></canvas>
</div>
<div class="absolute inset-0 flex items-center justify-center">
<div class="text-center p-8 max-w-2xl">
<h3 class="text-3xl md:text-4xl font-bold mb-4 gradient-text studio-font">Our Repertoire</h3>
<p class="text-gray-300 mb-6">Utilizing a range of innovative technologies to create extraordinary objects and experiences for our clients.</p>
<div class="flex justify-center gap-4">
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Steel</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Bronze</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Aluminum</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Wood</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Plastics</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Glass</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Composites</button>
<button class="px-6 py-2 rounded-full text-sm font-medium bg-blue-500/20 border border-blue-400/50 hover:bg-blue-500/30">Resins</button>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- Performance Stats -->
<section class="py-20 relative overflow-hidden px-4 section-mobile" id="about">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="material-card rounded-3xl p-8 md:p-12 grid grid-cols-1 md:grid-cols-2 gap-12 items-center mobile-grid-1">
<div>
<h2 class="text-3xl md:text-5xl font-bold mb-6 studio-font">
<span class="gradient-text">Studio</span> Highlights
                    </h2>
<p class="text-xl text-gray-300 mb-8">
                        Founded in 2013 by Ben Stagl and Ally Reza, CHILAB + MAXCNC has established itself as a leader in custom fabrication and design.
                    </p>
<div class="grid grid-cols-2 gap-6">
<div>
<div class="text-4xl font-bold gradient-text mb-2 studio-font">2013</div>
<p class="text-gray-400">Founded in Chicago</p>
</div>
<div>
<div class="text-4xl font-bold gradient-text mb-2 studio-font">100+</div>
<p class="text-gray-400">Completed Projects</p>
</div>
<div>
<div class="text-4xl font-bold gradient-text mb-2 studio-font">4.9/5</div>
<p class="text-gray-400">Client Satisfaction</p>
</div>
<div>
<div class="text-4xl font-bold gradient-text mb-2 studio-font">12+</div>
<p class="text-gray-400">Featured Publications</p>
</div>
</div>
</div>
<div class="h-64 md:h-96 relative">
<div class="w-full h-full">
    <canvas class="absolute inset-0 w-full h-full" id="studioCanvas"></canvas>
</div>
</div>
</div>
</div>
</section>
<!-- Quote Section -->
<section class="py-20 relative overflow-hidden px-4 bg-black bg-opacity-50 section-mobile">
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
<div class="text-5xl text-blue-400 mb-6">
<i class="fas fa-quote-left"></i>
</div>
<blockquote class="text-2xl md:text-3xl font-light italic text-gray-200 mb-8">
                "I feel like there is a special energy that is put into the pieces that we create because we really love and care about making things that last lifetimes."
            </blockquote>
<div class="font-medium text-xl text-blue-400">— Ally Reza, Co-founder</div>
</div>
</section>
<!-- Contact Section -->
<section class="py-20 relative overflow-hidden px-4 section-mobile" id="contact">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="text-center mb-16">
<h2 class="text-3xl md:text-5xl font-bold mb-4 studio-font">
<span class="gradient-text">Let's</span> Collaborate
                </h2>
<p class="text-xl text-gray-300 max-w-4xl mx-auto">
                    Reach out to discuss how we can bring your vision to life through expert craftsmanship and innovative design.
                </p>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mobile-grid-1">
<div class="material-card rounded-3xl p-8 md:p-12 relative overflow-hidden">
<form class="space-y-6 relative z-10">
<div>
<label class="block text-sm font-medium text-gray-300 mb-2" for="name">Your Name</label>
<input class="w-full px-5 py-3 bg-gray-900 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="name" placeholder="Enter your name" type="text"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-300 mb-2" for="email">Email Address</label>
<input class="w-full px-5 py-3 bg-gray-900 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="email" placeholder="your@email.com" type="email"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-300 mb-2" for="project">Project Type</label>
<select class="w-full px-5 py-3 bg-gray-900 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="project">
<option>Select project type</option>
<option>Architectural Installation</option>
<option>Fine Art Fabrication</option>
<option>Custom Furniture</option>
<option>Public Art</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-300 mb-2" for="message">Project Details</label>
<textarea class="w-full px-5 py-3 bg-gray-900 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="message" placeholder="Tell us about your project..." rows="4"></textarea>
</div>
<button class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-8 py-4 rounded-xl font-medium text-lg transition-all duration-300 transform hover:scale-105" type="submit">
                            Send Message
                        </button>
</form>
<div class="absolute -bottom-20 -right-20 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl"></div>
<div class="absolute -top-20 -left-20 w-64 h-64 bg-blue-700/10 rounded-full blur-3xl"></div>
</div>
<div class="relative">
<div class="h-full w-full rounded-3xl overflow-hidden">
<div class="w-full h-full">
    <canvas class="h-full w-full bg-gray-900" id="contactCanvas"></canvas>
</div>
</div>
<div class="absolute bottom-8 left-8 right-8 p-6 bg-black/70 backdrop-filter backdrop-blur-sm rounded-xl border border-gray-700">
<h3 class="text-xl font-bold mb-2 gradient-text studio-font">Visit Our Studio</h3>
<p class="text-gray-300 mb-4">We're located in the vibrant art and design community of Chicago.</p>
<div class="flex space-x-4">
<a class="w-10 h-10 bg-gray-800 hover:bg-blue-400 rounded-full flex items-center justify-center transition-all duration-300" href="#">
<i class="fab fa-instagram"></i>
</a>
<a class="w-10 h-10 bg-gray-800 hover:bg-blue-400 rounded-full flex items-center justify-center transition-all duration-300" href="#">
<i class="fab fa-linkedin-in"></i>
</a>
<a class="w-10 h-10 bg-gray-800 hover:bg-blue-400 rounded-full flex items-center justify-center transition-all duration-300" href="#">
<i class="fab fa-behance"></i>
</a>
<a class="w-10 h-10 bg-gray-800 hover:bg-blue-400 rounded-full flex items-center justify-center transition-all duration-300" href="#">
<i class="fas fa-envelope"></i>
</a>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- Footer -->
<footer class="py-12 border-t border-gray-800 relative overflow-hidden px-4 mobile-py-12 mobile-px-4">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="grid grid-cols-1 md:grid-cols-4 gap-12 mobile-grid-1 gap-mobile-4">
<div>
<h4 class="text-xl font-bold gradient-text studio-font mb-4">CHILAB + MAXCNC</h4>
<p class="text-gray-400 mb-6">Blending artisanal craftsmanship with innovative technology to create extraordinary objects and experiences since 2013.</p>
<div class="flex space-x-4">
<a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">
<i class="fab fa-instagram"></i>
</a>
<a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">
<i class="fab fa-linkedin-in"></i>
</a>
<a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">
<i class="fab fa-behance"></i>
</a>
<a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">
<i class="fas fa-envelope"></i>
</a>
</div>
</div>
<div>
<h5 class="text-lg font-bold text-white mb-4">Services</h5>
<ul class="space-y-2">
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Metal Fabrication</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Wood Fabrication</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Plastics</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Composites</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Public Art</a></li>
</ul>
</div>
<div>
<h5 class="text-lg font-bold text-white mb-4">Studio</h5>
<ul class="space-y-2">
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">About Us</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Team</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Process</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">News</a></li>
<li><a class="text-gray-400 hover:text-blue-400 transition-colors duration-300" href="#">Contact</a></li>
</ul>
</div>
<div>
<h5 class="text-lg font-bold text-white mb-4">Newsletter</h5>
<p class="text-gray-400 mb-4">Subscribe to our newsletter for updates on our latest projects and exhibitions.</p>
<form class="flex">
<input class="px-4 py-2 bg-gray-800 border border-gray-700 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent w-full" placeholder="Your email" type="email"/>
<button class="px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-r-lg transition-all duration-300" type="submit">
<i class="fas fa-paper-plane"></i>
</button>
</form>
</div>
</div>
<div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
<p class="text-gray-500 text-sm mb-4 md:mb-0">© 2025 CHILAB + MAXCNC. All rights reserved.</p>
<div class="flex space-x-6">
<a class="text-gray-500 hover:text-blue-400 text-sm transition-colors duration-300" href="#">Privacy Policy</a>
<a class="text-gray-500 hover:text-blue-400 text-sm transition-colors duration-300" href="#">Terms of Service</a>
<a class="text-gray-500 hover:text-blue-400 text-sm transition-colors duration-300" href="#">Cookies</a>
</div>
</div>
</div>
<!-- Floating 3D Material -->
<div class="absolute -bottom-20 -right-20 w-40 h-40 mobile-hidden">
<div class="w-full h-full">
    <canvas class="w-full h-full" id="footerMaterialCanvas"></canvas>
</div>
</div>
</footer>
<script>
        // Ensure THREE flag is set early
        if (window.THREE_ALREADY_IMPORTED !== true) {
            window.THREE_ALREADY_IMPORTED = true;
        }
        
        // Device detection - simple approach without ES6
        var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;
        
        // Initialize Vanta.js background if available
        document.addEventListener('DOMContentLoaded', function() {
            // Apply appropriate styles based on device
            if (isMobile) {
                document.body.classList.add('mobile-device');
                
                // Smaller background effect for mobile
                if (typeof VANTA !== 'undefined' && VANTA.GLOBE) {
                    VANTA.GLOBE({
                        el: "#vanta-bg",
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: true,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        scale: 0.75,
                        scaleMobile: 0.5,
                        color: 0x65CCF3,
                        backgroundColor: 0x101014,
                        size: 0.6,
                        points: 8.00,
                        maxDistance: 18.00,
                        spacing: 10.00
                    });
                } else {
                    // Fallback if VANTA is not available
                    var particleBg = document.getElementById('vanta-bg');
                    if (particleBg) {
                        particleBg.style.background = 'linear-gradient(135deg, #101014 0%, #1a1a24 100%)';
                    }
                    console.log('VANTA.js not available, using fallback background.');
                }
            } else {
                // Desktop settings
                if (typeof VANTA !== 'undefined' && VANTA.GLOBE) {
                    VANTA.GLOBE({
                        el: "#vanta-bg",
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        scale: 1.00,
                        scaleMobile: 0.75,
                        color: 0x65CCF3,
                        backgroundColor: 0x101014,
                        size: 0.8
                    });
                } else {
                    // Fallback if VANTA is not available
                    var particleBg = document.getElementById('vanta-bg');
                    if (particleBg) {
                        particleBg.style.background = 'linear-gradient(135deg, #101014 0%, #1a1a24 100%)';
                    }
                    console.log('VANTA.js not available, using fallback background.');
                }
            }
            
            // Mobile menu toggle
            var mobileMenuButton = document.getElementById('mobileMenuButton');
            var mobileMenu = document.getElementById('mobileMenu');
            
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', function() {
                    if (mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.remove('hidden');
                    } else {
                        mobileMenu.classList.add('hidden');
                    }
                });
                
                // Close mobile menu when clicking on a link
                var mobileLinks = mobileMenu.querySelectorAll('a');
                for (var i = 0; i < mobileLinks.length; i++) {
                    mobileLinks[i].addEventListener('click', function() {
                        mobileMenu.classList.add('hidden');
                    });
                }
            }
            
            // Initialize Three.js 3D models with error handling
            try {
                // Check if THREE is available
                if (typeof THREE === 'undefined') {
                    console.log('THREE.js not available, using fallback for 3D elements.');
                    // Create fallback backgrounds for all canvas elements
                    document.querySelectorAll('canvas').forEach(canvas => {
                        const ctx = canvas.getContext('2d');
                        if (ctx) {
                            // Create gradient background
                            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                            gradient.addColorStop(0, '#1a1a24');
                            gradient.addColorStop(1, '#101014');
                            ctx.fillStyle = gradient;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                            
                            // Add some subtle texture/pattern
                            ctx.fillStyle = 'rgba(101, 204, 243, 0.1)';
                            for (let i = 0; i < 20; i++) {
                                const x = Math.random() * canvas.width;
                                const y = Math.random() * canvas.height;
                                const size = Math.random() * 10 + 2;
                                ctx.beginPath();
                                ctx.arc(x, y, size, 0, Math.PI * 2);
                                ctx.fill();
                            }
                        }
                    });
                    return; // Exit early if THREE.js isn't available
                }
                
                // Bronze Torus in Hero Section - Making it invisible while keeping the structure
                const bronzeTorusCanvas = document.getElementById('bronzeTorusCanvas');
                if (!bronzeTorusCanvas) throw new Error('Bronze torus canvas not found');
                
                const bronzeTorusScene = new THREE.Scene();
                const bronzeTorusCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const bronzeTorusRenderer = new THREE.WebGLRenderer({ 
                    canvas: bronzeTorusCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // We'll create an empty scene to keep the structure without rendering anything
                bronzeTorusCamera.position.z = 3;
                
                // Material Cube in Hero Section
                const materialCubeCanvas = document.getElementById('materialCubeCanvas');
                if (!materialCubeCanvas) throw new Error('Material cube canvas not found');
                
                const materialCubeScene = new THREE.Scene();
                const materialCubeCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const materialCubeRenderer = new THREE.WebGLRenderer({ 
                    canvas: materialCubeCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                const materialCubeGeometry = new THREE.BoxGeometry(1, 1, 1);
                const materialCubeMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0xE12726,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.6
                });
                const materialCube = new THREE.Mesh(materialCubeGeometry, materialCubeMaterial);
                materialCubeScene.add(materialCube);
                
                materialCubeCamera.position.z = 3;
                
                // Material Pyramid in Hero Section
                const materialPyramidCanvas = document.getElementById('materialPyramidCanvas');
                if (!materialPyramidCanvas) throw new Error('Material pyramid canvas not found');
                
                const materialPyramidScene = new THREE.Scene();
                const materialPyramidCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const materialPyramidRenderer = new THREE.WebGLRenderer({ 
                    canvas: materialPyramidCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                const materialPyramidGeometry = new THREE.ConeGeometry(0.8, 1.5, 4);
                const materialPyramidMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0xE12726,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.6
                });
                const materialPyramid = new THREE.Mesh(materialPyramidGeometry, materialPyramidMaterial);
                materialPyramid.rotation.y = Math.PI / 4;
                materialPyramidScene.add(materialPyramid);
                
                materialPyramidCamera.position.z = 3;
                
                // Uber Project Canvas - Spiral Staircase
                const uberCanvas = document.getElementById('uberCanvas');
                if (!uberCanvas) throw new Error('Uber canvas not found');
                
                const uberScene = new THREE.Scene();
                const uberCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const uberRenderer = new THREE.WebGLRenderer({ 
                    canvas: uberCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // Create a spiral staircase for Uber project
                const spiralGroup = new THREE.Group();
                
                // Materials
                const stepMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x65CCF3, 
                    transparent: true,
                    opacity: 0.8
                });
                const railingMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0xE1E1E1,
                    transparent: true,
                    opacity: 0.6
                });
                
                // Create spiral steps
                const numSteps = 24;
                const radius = 0.8;
                const stepWidth = 0.6;
                const stepHeight = 0.05;
                const stepDepth = 0.2;
                const heightIncrement = 0.15;
                const angleIncrement = (Math.PI * 2) / numSteps;
                
                for (let i = 0; i < numSteps; i++) {
                    const angle = i * angleIncrement;
                    const height = i * heightIncrement;
                    
                    // Create step
                    const stepGeometry = new THREE.BoxGeometry(stepWidth, stepHeight, stepDepth);
                    const step = new THREE.Mesh(stepGeometry, stepMaterial);
                    
                    // Position on spiral
                    step.position.x = Math.cos(angle) * radius;
                    step.position.y = height - 1; // Start below center
                    step.position.z = Math.sin(angle) * radius;
                    
                    // Rotate to face center
                    step.rotation.y = Math.PI / 2 - angle;
                    
                    spiralGroup.add(step);
                    
                    // Create railing post
                    const postGeometry = new THREE.CylinderGeometry(0.02, 0.02, 0.3, 8);
                    const post = new THREE.Mesh(postGeometry, railingMaterial);
                    post.position.x = Math.cos(angle) * (radius - stepWidth/2 + 0.05);
                    post.position.y = height + 0.15 - 1; // Adjust for height
                    post.position.z = Math.sin(angle) * (radius - stepWidth/2 + 0.05);
                    spiralGroup.add(post);
                }
                
                // Add center column
                const centerColumnGeometry = new THREE.CylinderGeometry(0.1, 0.1, numSteps * heightIncrement, 16);
                const centerColumn = new THREE.Mesh(centerColumnGeometry, railingMaterial);
                centerColumn.position.y = ((numSteps * heightIncrement) / 2) - 1; // Center vertically
                spiralGroup.add(centerColumn);
                
                // Rotate the entire staircase for better viewing angle
                spiralGroup.rotation.x = Math.PI / 6;
                
                uberScene.add(spiralGroup);
                
                uberCamera.position.z = 3.5;
                uberCamera.position.y = 0.5;
                
                // St. Nicholas Project Canvas - Single Round Cross (like the reference image)
                const stNicholasCanvas = document.getElementById('stNicholasCanvas');
                if (!stNicholasCanvas) throw new Error('St. Nicholas canvas not found');
                
                const stNicholasScene = new THREE.Scene();
                const stNicholasCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const stNicholasRenderer = new THREE.WebGLRenderer({ 
                    canvas: stNicholasCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // Create a single rounded cross like in the reference image
                function createRoundCross() {
                    const crossGroup = new THREE.Group();
                    
                    // Create the base shape
                    const shape = new THREE.Shape();
                    
                    // Parameters for the cross
                    const armLength = 0.7;      // Length of each arm
                    const centerWidth = 0.25;   // Width at the center
                    const endWidth = 0.45;      // Width at the ends (flared)
                    
                    // Define the cross shape with rounded/flared arms
                    // Top arm
                    shape.moveTo(-centerWidth/2, -centerWidth/2);
                    shape.lineTo(-endWidth/2, -armLength);
                    shape.quadraticCurveTo(0, -armLength-0.1, endWidth/2, -armLength);
                    shape.lineTo(centerWidth/2, -centerWidth/2);
                    
                    // Right arm
                    shape.lineTo(armLength, -endWidth/2);
                    shape.quadraticCurveTo(armLength+0.1, 0, armLength, endWidth/2);
                    shape.lineTo(centerWidth/2, centerWidth/2);
                    
                    // Bottom arm
                    shape.lineTo(endWidth/2, armLength);
                    shape.quadraticCurveTo(0, armLength+0.1, -endWidth/2, armLength);
                    shape.lineTo(-centerWidth/2, centerWidth/2);
                    
                    // Left arm
                    shape.lineTo(-armLength, endWidth/2);
                    shape.quadraticCurveTo(-armLength-0.1, 0, -armLength, -endWidth/2);
                    shape.lineTo(-centerWidth/2, -centerWidth/2);
                    
                    // Extrude settings with rounded edges
                    const extrudeSettings = {
                        steps: 2,
                        depth: 0.1,
                        bevelEnabled: true,
                        bevelThickness: 0.05,
                        bevelSize: 0.05,
                        bevelOffset: 0,
                        bevelSegments: 6
                    };
                    
                    // Create geometry
                    const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
                    
                    // Create shiny, reflective material to mimic glass/mirror
                    const material = new THREE.MeshBasicMaterial({
                        color: 0xffffff,
                        transparent: true,
                        opacity: 0.9,
                        side: THREE.DoubleSide,
                        envMap: createCubeMap(),  // Create environment map for reflection
                        reflectivity: 0.9,
                        metalness: 1.0,
                        roughness: 0.2
                    });
                    
                    // Create mesh
                    const crossMesh = new THREE.Mesh(geometry, material);
                    
                    // Add ambient light to the scene for better visibility
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                    crossGroup.add(ambientLight);
                    
                    // Add directional light for highlights
                    const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
                    dirLight.position.set(1, 1, 2);
                    crossGroup.add(dirLight);
                    
                    crossGroup.add(crossMesh);
                    return crossGroup;
                }
                
                // Function to create a simple environment cube map for reflections
                function createCubeMap() {
                    const cubeRenderTarget = new THREE.WebGLCubeRenderTarget(128);
                    const cubeTexture = new THREE.CubeTexture();
                    
                    // Create simple gradient textures for each side
                    for (let i = 0; i < 6; i++) {
                        const canvas = document.createElement('canvas');
                        canvas.width = 128;
                        canvas.height = 128;
                        const ctx = canvas.getContext('2d');
                        
                        // Create gradient based on side
                        const gradient = ctx.createLinearGradient(0, 0, 128, 128);
                        gradient.addColorStop(0, '#FFFFFF');
                        gradient.addColorStop(1, '#A0D8EF');  // Light blue tint
                        
                        ctx.fillStyle = gradient;
                        ctx.fillRect(0, 0, 128, 128);
                        
                        if (!cubeTexture.image) cubeTexture.image = [];
                        cubeTexture.image[i] = canvas;
                    }
                    
                    cubeTexture.needsUpdate = true;
                    return cubeTexture;
                }
                
                // Create and add a single cross
                const cross = createRoundCross();
                
                // Position it to face the camera
                cross.position.z = -0.5;
                cross.rotation.x = Math.PI / 8;
                
                // Add slight rotation animation
                const animate = function() {
                    cross.rotation.y += 0.01;
                    stNicholasRenderer.render(stNicholasScene, stNicholasCamera);
                    requestAnimationFrame(animate);
                };
                
                // Start the animation
                stNicholasScene.add(cross);
                stNicholasCamera.position.z = 2;
                animate();
                
                // Knoll Canvas
                const knollCanvas = document.getElementById('knollCanvas');
                if (!knollCanvas) throw new Error('Knoll canvas not found');
                
                const knollScene = new THREE.Scene();
                const knollCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const knollRenderer = new THREE.WebGLRenderer({ 
                    canvas: knollCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // Create a table for Knoll project
                const tableGroup = new THREE.Group();
                
                // Table top
                var tableTopGeometry = new THREE.BoxGeometry(1.5, 0.05, 0.8);
                var tableMaterial = new THREE.MeshBasicMaterial({
                    color: 0x65CCF3,
                    wireframe: false
                });
                var tableTop = new THREE.Mesh(tableTopGeometry, tableMaterial);
                tableTop.position.y = 0.4;
                tableGroup.add(tableTop);
                
                // Table legs
                for (var i = 0; i < 4; i++) {
                    var legGeometry = new THREE.CylinderGeometry(0.03, 0.03, 0.8, 8);
                    var leg = new THREE.Mesh(legGeometry, tableMaterial);
                    
                    var xPos = i < 2 ? -0.6 : 0.6;
                    var zPos = i % 2 === 0 ? -0.3 : 0.3;
                    
                    leg.position.set(xPos, 0, zPos);
                    tableGroup.add(leg);
                }
                
                knollScene.add(tableGroup);
                
                // Add some vertical metal rods behind (marquee)
                var rodsGroup = new THREE.Group();
                for (var i = 0; i < 15; i++) {
                    var rodGeometry = new THREE.CylinderGeometry(0.01, 0.01, 2, 8);
                    var rodMaterial = new THREE.MeshBasicMaterial({
                        color: 0xE12726,
                        wireframe: false
                    });
                    var rod = new THREE.Mesh(rodGeometry, rodMaterial);
                    
                    rod.position.z = -0.5;
                    rod.position.x = (i - 7) * 0.1;
                    rod.position.y = 0.5;
                    
                    rodsGroup.add(rod);
                }
                
                knollScene.add(rodsGroup);
                
                knollCamera.position.z = 3;
                
                // Material Viz Canvas
                const materialVizCanvas = document.getElementById('materialVizCanvas');
                if (!materialVizCanvas) throw new Error('Material viz canvas not found');
                
                const materialVizScene = new THREE.Scene();
                const materialVizCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const materialVizRenderer = new THREE.WebGLRenderer({ 
                    canvas: materialVizCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // Create a material preview system
                var materialVizParticles = 500;
                var materialVizPositions = new Float32Array(materialVizParticles * 3);
                var materialVizColors = new Float32Array(materialVizParticles * 3);
                
                for (var i = 0; i < materialVizParticles; i++) {
                    materialVizPositions[i * 3] = (Math.random() - 0.5) * 10;
                    materialVizPositions[i * 3 + 1] = (Math.random() - 0.5) * 10;
                    materialVizPositions[i * 3 + 2] = (Math.random() - 0.5) * 10;
                    
                    // Chicago flag color palette - blues and whites with a touch of red
                    var colorChoice = Math.random();
                    if (colorChoice < 0.7) {
                        materialVizColors[i * 3] = 0.4; // R - blue tone
                        materialVizColors[i * 3 + 1] = 0.8; // G - blue tone
                        materialVizColors[i * 3 + 2] = 0.95; // B - blue tone
                    } else if (colorChoice < 0.9) {
                        materialVizColors[i * 3] = 1.0; // R - white
                        materialVizColors[i * 3 + 1] = 1.0; // G - white
                        materialVizColors[i * 3 + 2] = 1.0; // B - white
                    } else {
                        materialVizColors[i * 3] = 0.88; // R - red
                        materialVizColors[i * 3 + 1] = 0.15; // G - red
                        materialVizColors[i * 3 + 2] = 0.15; // B - red
                    }
                }
                
                const materialVizGeometry = new THREE.BufferGeometry();
                materialVizGeometry.setAttribute('position', new THREE.BufferAttribute(materialVizPositions, 3));
                materialVizGeometry.setAttribute('color', new THREE.BufferAttribute(materialVizColors, 3));
                
                const materialVizMaterial = new THREE.PointsMaterial({
                    size: 0.2,
                    vertexColors: true,
                    transparent: true,
                    opacity: 0.8,
                    sizeAttenuation: true
                });
                
                const materialVizParticleSystem = new THREE.Points(materialVizGeometry, materialVizMaterial);
                materialVizScene.add(materialVizParticleSystem);
                
                materialVizCamera.position.z = 3;
                
                // Studio Canvas - Butterfly Sculpture
                const studioCanvas = document.getElementById('studioCanvas');
                if (!studioCanvas) throw new Error('Studio canvas not found');
                
                const studioScene = new THREE.Scene();
                const studioCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const studioRenderer = new THREE.WebGLRenderer({ 
                    canvas: studioCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // Create butterfly sculpture like in the image
                const butterflyGroup = new THREE.Group();
                
                // Function to create the butterfly body
                function createButterflyBody() {
                    const bodyGroup = new THREE.Group();
                    
                    // Create main body - metallic
                    const bodyGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.6, 8);
                    const bodyMaterial = new THREE.MeshStandardMaterial({
                        color: 0x2A2A2A,
                        metalness: 0.9,
                        roughness: 0.2
                    });
                    const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
                    body.rotation.x = Math.PI / 2; // Lay horizontally
                    bodyGroup.add(body);
                    
                    // Create head
                    const headGeometry = new THREE.SphereGeometry(0.08, 16, 16);
                    const head = new THREE.Mesh(headGeometry, bodyMaterial);
                    head.position.set(0, 0, 0.3);
                    bodyGroup.add(head);
                    
                    return bodyGroup;
                }
                
                // Function to create a butterfly wing with eye pattern
                function createButterflyWing(isLeft) {
                    const wingGroup = new THREE.Group();
                    
                    // Create wing base shape
                    const wingShape = new THREE.Shape();
                    
                    // Define wing outline points
                    wingShape.moveTo(0, 0);
                    wingShape.quadraticCurveTo(0.4, 0.3, 0.8, 0.1);
                    wingShape.quadraticCurveTo(1.0, 0.5, 0.7, 0.9);
                    wingShape.quadraticCurveTo(0.3, 1.1, 0.1, 0.7);
                    wingShape.quadraticCurveTo(0, 0.5, 0, 0);
                    
                    // Create extruded geometry for wing
                    const wingExtrudeSettings = {
                        steps: 1,
                        depth: 0.02,
                        bevelEnabled: true,
                        bevelThickness: 0.01,
                        bevelSize: 0.01,
                        bevelSegments: 2
                    };
                    
                    const wingGeometry = new THREE.ExtrudeGeometry(wingShape, wingExtrudeSettings);
                    
                    // Create metal material for wing
                    const wingMaterial = new THREE.MeshStandardMaterial({
                        color: 0xCCCCCC,
                        metalness: 0.7,
                        roughness: 0.3,
                        side: THREE.DoubleSide
                    });
                    
                    const wing = new THREE.Mesh(wingGeometry, wingMaterial);
                    
                    // Mirror for right wing
                    if (!isLeft) {
                        wing.scale.x = -1;
                    }
                    
                    // Add "eyes" to the wing
                    const eyeCount = 20;
                    const eyePositions = [];
                    
                    // Generate random but balanced eye positions
                    for (let i = 0; i < eyeCount; i++) {
                        const x = 0.1 + Math.random() * 0.7;
                        const y = 0.1 + Math.random() * 0.8;
                        // Check distance from existing eyes
                        let validPosition = true;
                        for (const pos of eyePositions) {
                            const dx = pos.x - x;
                            const dy = pos.y - y;
                            const dist = Math.sqrt(dx*dx + dy*dy);
                            if (dist < 0.15) {
                                validPosition = false;
                                break;
                            }
                        }
                        if (validPosition) {
                            eyePositions.push({x, y});
                        }
                    }
                    
                    // Create eye decorations
                    for (const pos of eyePositions) {
                        // Create "holes" in the wing
                        const holeShape = new THREE.Shape();
                        holeShape.ellipse(pos.x * (isLeft ? 1 : -1), pos.y, 0.05, 0.08, 0, Math.PI * 2);
                        
                        // Create eye geometry
                        const eyeGeometry = new THREE.CircleGeometry(0.05, 16);
                        const random = Math.random();
                        
                        // Mix of different colored eyes
                        let eyeColor;
                        if (random < 0.4) {
                            eyeColor = 0x87CEEB; // Light blue
                        } else if (random < 0.7) {
                            eyeColor = 0x4682B4; // Steel blue
                        } else {
                            eyeColor = 0x2F4F4F; // Dark slate gray
                        }
                        
                        const eyeMaterial = new THREE.MeshBasicMaterial({
                            color: eyeColor,
                            side: THREE.DoubleSide
                        });
                        
                        const eye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                        eye.position.set(pos.x * (isLeft ? 1 : -1), pos.y, 0.02);
                        
                        // Create pupil
                        const pupilGeometry = new THREE.CircleGeometry(0.02, 16);
                        const pupilMaterial = new THREE.MeshBasicMaterial({
                            color: 0x000000,
                            side: THREE.DoubleSide
                        });
                        
                        const pupil = new THREE.Mesh(pupilGeometry, pupilMaterial);
                        pupil.position.set(pos.x * (isLeft ? 1 : -1), pos.y, 0.03);
                        
                        wingGroup.add(eye);
                        wingGroup.add(pupil);
                    }
                    
                    wingGroup.add(wing);
                    return wingGroup;
                }
                
                // Function to create the stand
                function createStand() {
                    const standGroup = new THREE.Group();
                    
                    // Create pole
                    const poleGeometry = new THREE.CylinderGeometry(0.05, 0.05, 1.2, 8);
                    const poleMaterial = new THREE.MeshStandardMaterial({
                        color: 0x2A2A2A,
                        metalness: 0.9,
                        roughness: 0.2
                    });
                    const pole = new THREE.Mesh(poleGeometry, poleMaterial);
                    pole.position.y = -0.6;
                    standGroup.add(pole);
                    
                    // Create base
                    const baseGeometry = new THREE.CylinderGeometry(0.3, 0.3, 0.05, 16);
                    const base = new THREE.Mesh(baseGeometry, poleMaterial);
                    base.position.y = -1.2;
                    standGroup.add(base);
                    
                    return standGroup;
                }
                
                // Create all butterfly components
                const body = createButterflyBody();
                const leftWing = createButterflyWing(true);
                const rightWing = createButterflyWing(false);
                const stand = createStand();
                
                // Position wings
                leftWing.position.set(0, 0, 0);
                rightWing.position.set(0, 0, 0);
                
                // Add pieces to butterfly group
                butterflyGroup.add(body);
                butterflyGroup.add(leftWing);
                butterflyGroup.add(rightWing);
                butterflyGroup.add(stand);
                
                // Add lighting
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                studioScene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                studioScene.add(directionalLight);
                
                // Add the butterfly to the scene
                butterflyGroup.rotation.x = -Math.PI / 6; // Tilt forward
                studioScene.add(butterflyGroup);
                
                // Position camera
                studioCamera.position.z = 3;
                studioCamera.position.y = 0.3;
                
                // Contact Canvas
                const contactCanvas = document.getElementById('contactCanvas');
                if (!contactCanvas) throw new Error('Contact canvas not found');
                
                const contactScene = new THREE.Scene();
                const contactCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const contactRenderer = new THREE.WebGLRenderer({ 
                    canvas: contactCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                // Create workshop environment with material samples
                var materialSamples = [];
                var materialPositions = [];
                var materialColors = [0x65CCF3, 0xFFFFFF, 0xE12726, 0x65CCF3, 0xFFFFFF];
                
                for (var i = 0; i < 5; i++) {
                    var sampleGeometry = new THREE.BoxGeometry(0.5, 0.1, 0.5);
                    var sampleMaterial = new THREE.MeshBasicMaterial({
                        color: materialColors[i],
                        transparent: i > 2,
                        opacity: i > 2 ? 0.7 : 1
                    });
                    var sample = new THREE.Mesh(sampleGeometry, sampleMaterial);
                    
                    sample.position.x = (Math.random() - 0.5) * 3;
                    sample.position.y = (Math.random() - 0.5) * 2;
                    sample.position.z = (Math.random() - 0.5) * 3;
                    sample.rotation.x = Math.random() * Math.PI;
                    sample.rotation.z = Math.random() * Math.PI;
                    
                    materialPositions.push(new THREE.Vector3(
                        sample.position.x,
                        sample.position.y,
                        sample.position.z
                    ));
                    
                    materialSamples.push(sample);
                    contactScene.add(sample);
                }
                
                // Add connecting lines
                const lineGeometry = new THREE.BufferGeometry();
                const lineVertices = [];
                
                for (let i = 0; i < materialPositions.length; i++) {
                    for (let j = i + 1; j < materialPositions.length; j++) {
                        lineVertices.push(
                            materialPositions[i].x, materialPositions[i].y, materialPositions[i].z,
                            materialPositions[j].x, materialPositions[j].y, materialPositions[j].z
                        );
                    }
                }
                
                lineGeometry.setAttribute('position', new THREE.Float32BufferAttribute(lineVertices, 3));
                const lineMaterial = new THREE.LineBasicMaterial({
                    color: 0x65CCF3,
                    transparent: true,
                    opacity: 0.3
                });
                const lines = new THREE.LineSegments(lineGeometry, lineMaterial);
                contactScene.add(lines);
                
                contactCamera.position.z = 6;
                
                // Footer Material
                const footerMaterialCanvas = document.getElementById('footerMaterialCanvas');
                if (!footerMaterialCanvas) throw new Error('Footer material canvas not found');
                
                const footerMaterialScene = new THREE.Scene();
                const footerMaterialCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const footerMaterialRenderer = new THREE.WebGLRenderer({ 
                    canvas: footerMaterialCanvas, 
                    alpha: true,
                    antialias: true 
                });
                
                const footerMaterialGeometry = new THREE.SphereGeometry(1, 32, 32);
                const footerMaterialMaterial = new THREE.MeshBasicMaterial({
                    color: 0x65CCF3,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.4
                });
                const footerMaterial = new THREE.Mesh(footerMaterialGeometry, footerMaterialMaterial);
                footerMaterialScene.add(footerMaterial);
                
                footerMaterialCamera.position.z = 3;
                
                // Intersection Observer for animated elements
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, {
                    threshold: 0.1
                });
                
                document.querySelectorAll('.feature-panel').forEach(panel => {
                    observer.observe(panel);
                });
                
                // Function to set renderer size
                function setRendererSize(renderer, canvas) {
                    if (!renderer || !canvas) return;
                    
                    const parent = canvas.parentElement;
                    if (!parent) return;
                    
                    const width = parent.offsetWidth;
                    const height = parent.offsetHeight;
                    
                    if (width > 0 && height > 0) {
                        renderer.setSize(width, height);
                    }
                }
                
                // Initialize sizes for all canvases
                function initializeCanvasSizes() {
                    // Project canvases with fixed aspect ratios
                    if (uberCanvas && uberRenderer) {
                        setRendererSize(uberRenderer, uberCanvas);
                    }
                    
                    if (stNicholasCanvas && stNicholasRenderer) {
                        setRendererSize(stNicholasRenderer, stNicholasCanvas);
                    }
                    
                    if (knollCanvas && knollRenderer) {
                        setRendererSize(knollRenderer, knollCanvas);
                    }
                    
                    // Other canvases
                    if (bronzeTorusCanvas && bronzeTorusRenderer) {
                        setRendererSize(bronzeTorusRenderer, bronzeTorusCanvas);
                    }
                    
                    if (materialCubeCanvas && materialCubeRenderer) {
                        setRendererSize(materialCubeRenderer, materialCubeCanvas);
                    }
                    
                    if (materialPyramidCanvas && materialPyramidRenderer) {
                        setRendererSize(materialPyramidRenderer, materialPyramidCanvas);
                    }
                    
                    if (materialVizCanvas && materialVizRenderer) {
                        setRendererSize(materialVizRenderer, materialVizCanvas);
                    }
                    
                    if (studioCanvas && studioRenderer) {
                        setRendererSize(studioRenderer, studioCanvas);
                    }
                    
                    if (contactCanvas && contactRenderer) {
                        setRendererSize(contactRenderer, contactCanvas);
                    }
                    
                    if (footerMaterialCanvas && footerMaterialRenderer) {
                        setRendererSize(footerMaterialRenderer, footerMaterialCanvas);
                    }
                }
                
                // Call initialization
                initializeCanvasSizes();
                
                // Mobile optimization for 3D rendering
                if (isMobile) {
                    // Reduce complexity for mobile devices
                    const particleReduction = 0.5; // 50% reduction
                    
                    // Reduce animation frame rate on mobile
                    const mobileFrameRate = 30; // fps
                    const frameInterval = 1000 / mobileFrameRate;
                    let lastFrameTime = 0;
                    
                    // Override the animation loop for mobile
                    function mobileAnimate(currentTime) {
                        requestAnimationFrame(mobileAnimate);
                        
                        // Throttle frame rate on mobile
                        if (currentTime - lastFrameTime < frameInterval) return;
                        lastFrameTime = currentTime;
                        
                        try {
                            // Mobile-optimized animations
                            if (bronzeTorus && bronzeTorusRenderer && bronzeTorusScene && bronzeTorusCamera) {
                                bronzeTorus.rotation.x += 0.005; // Reduced speed
                                bronzeTorus.rotation.y += 0.005;
                                bronzeTorusRenderer.render(bronzeTorusScene, bronzeTorusCamera);
                            }
                            
                            // Only render visible elements on mobile
                            var visibleSections = [];
                            var sections = document.querySelectorAll('section');
                            for (var j = 0; j < sections.length; j++) {
                                var rect = sections[j].getBoundingClientRect();
                                if (rect.top < window.innerHeight && rect.bottom > 0) {
                                    visibleSections.push(sections[j].id || 'hero');
                                }
                            }
                            
                            // Only render what's visible
                            if (visibleSections.includes('hero') || visibleSections.length === 0) {
                                if (bronzeTorus && bronzeTorusRenderer && bronzeTorusScene && bronzeTorusCamera) {
                                    bronzeTorusRenderer.render(bronzeTorusScene, bronzeTorusCamera);
                                }
                            }
                            
                            if (visibleSections.includes('projects')) {
                                if (spiralGroup && uberRenderer && uberScene && uberCamera) {
                                    spiralGroup.rotation.y += 0.005;
                                    uberRenderer.render(uberScene, uberCamera);
                                }
                                if (crossGroup && stNicholasRenderer && stNicholasScene && stNicholasCamera) {
                                    stNicholasRenderer.render(stNicholasScene, stNicholasCamera);
                                }
                                if (tableGroup && knollRenderer && knollScene && knollCamera) {
                                    knollRenderer.render(knollScene, knollCamera);
                                }
                            }
                        } catch (error) {
                            console.log('Error in mobile animation loop:', error);
                        }
                    }
                    
                    // Use mobile-optimized animation loop
                    mobileAnimate(0);
                } else {
                    // Standard animation loop for desktop
                    function animate() {
                        requestAnimationFrame(animate);
                        
                        try {
                            // We're not animating the torus anymore since we removed it
                            if (bronzeTorusRenderer && bronzeTorusScene && bronzeTorusCamera) {
                                bronzeTorusRenderer.render(bronzeTorusScene, bronzeTorusCamera);
                            }
                            
                            // Rotate material cube (slower)
                            if (materialCube && materialCubeRenderer && materialCubeScene && materialCubeCamera) {
                                materialCube.rotation.x += 0.005;
                                materialCube.rotation.y += 0.005;
                                materialCubeRenderer.render(materialCubeScene, materialCubeCamera);
                            }
                            
                            // Rotate material pyramid (different axis)
                            if (materialPyramid && materialPyramidRenderer && materialPyramidScene && materialPyramidCamera) {
                                materialPyramid.rotation.x += 0.007;
                                materialPyramid.rotation.z += 0.007;
                                materialPyramidRenderer.render(materialPyramidScene, materialPyramidCamera);
                            }
                            
                            // Animate Uber spiral staircase
                            if (spiralGroup && uberRenderer && uberScene && uberCamera) {
                                spiralGroup.rotation.y += 0.005;
                                uberRenderer.render(uberScene, uberCamera);
                            }
                            
                            // We don't need to animate the crossGroup anymore as the single cross has its own animation
                            if (stNicholasRenderer && stNicholasScene && stNicholasCamera) {
                                stNicholasRenderer.render(stNicholasScene, stNicholasCamera);
                            }
                            
                            // Animate Knoll project
                            if (tableGroup && rodsGroup && knollRenderer && knollScene && knollCamera) {
                                tableGroup.rotation.y += 0.005;
                                rodsGroup.rotation.y += 0.003;
                                knollRenderer.render(knollScene, knollCamera);
                            }
                            
                            // Animate material viz particles
                            if (materialVizParticleSystem && materialVizRenderer && materialVizScene && materialVizCamera) {
                                materialVizParticleSystem.rotation.y += 0.003;
                                materialVizRenderer.render(materialVizScene, materialVizCamera);
                            }
                            
                            // Animate butterfly
                            if (butterflyGroup && studioRenderer && studioScene && studioCamera) {
                                butterflyGroup.rotation.y += 0.005;
                                studioRenderer.render(studioScene, studioCamera);
                            }
                            
                            // Animate contact samples
                            if (materialSamples && materialSamples.length && contactRenderer && contactScene && contactCamera) {
                                for (var i = 0; i < materialSamples.length; i++) {
                                    var sample = materialSamples[i];
                                    sample.position.y = Math.sin(Date.now() * 0.001 + i) * 0.2;
                                    sample.rotation.x += 0.01;
                                }
                                contactRenderer.render(contactScene, contactCamera);
                            }
                            
                            // Rotate footer material
                            if (footerMaterial && footerMaterialRenderer && footerMaterialScene && footerMaterialCamera) {
                                footerMaterial.rotation.y += 0.01;
                                footerMaterialRenderer.render(footerMaterialScene, footerMaterialCamera);
                            }
                        } catch (error) {
                            console.log('Error in animation loop:', error);
                        }
                    }
                    
                    animate();
                }
                
                // Handle window resize
                window.addEventListener('resize', function() {
                    try {
                        // Adjust canvas sizes and camera aspects
                        const canvases = [
                            { canvas: bronzeTorusCanvas, renderer: bronzeTorusRenderer, camera: bronzeTorusCamera },
                            { canvas: materialCubeCanvas, renderer: materialCubeRenderer, camera: materialCubeCamera },
                            { canvas: materialPyramidCanvas, renderer: materialPyramidRenderer, camera: materialPyramidCamera },
                            { canvas: uberCanvas, renderer: uberRenderer, camera: uberCamera },
                            { canvas: stNicholasCanvas, renderer: stNicholasRenderer, camera: stNicholasCamera },
                            { canvas: knollCanvas, renderer: knollRenderer, camera: knollCamera },
                            { canvas: materialVizCanvas, renderer: materialVizRenderer, camera: materialVizCamera },
                            { canvas: studioCanvas, renderer: studioRenderer, camera: studioCamera },
                            { canvas: contactCanvas, renderer: contactRenderer, camera: contactCamera },
                            { canvas: footerMaterialCanvas, renderer: footerMaterialRenderer, camera: footerMaterialCamera }
                        ];
                        
                        for (var i = 0; i < canvases.length; i++) {
                            var item = canvases[i];
                            if (!item.canvas || !item.renderer || !item.camera) continue;
                            
                            var parent = item.canvas.parentElement;
                            if (!parent) continue;
                            
                            var width = parent.offsetWidth;
                            var height = parent.offsetHeight;
                            
                            if (width > 0 && height > 0) {
                                item.canvas.width = width;
                                item.canvas.height = height;
                                item.renderer.setSize(width, height);
                                
                                // Update camera for new aspect ratio
                                item.camera.aspect = width / height;
                                item.camera.updateProjectionMatrix();
                            }
                        }
                    } catch (error) {
                        console.log('Error in resize handler:', error);
                    }
                });
                
                // Trigger an initial resize event to set proper canvas sizes
                window.dispatchEvent(new Event('resize'));
                
            } catch (error) {
                console.log('Error initializing 3D elements:', error);
                // Create fallback backgrounds for all canvas elements on error
                document.querySelectorAll('canvas').forEach(canvas => {
                    const ctx = canvas.getContext('2d');
                    if (ctx) {
                        // Create gradient background
                        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                        gradient.addColorStop(0, '#1a1a24');
                        gradient.addColorStop(1, '#101014');
                        ctx.fillStyle = gradient;
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                        
                        // Add some subtle texture/pattern
                        ctx.fillStyle = 'rgba(201, 157, 102, 0.1)';
                        for (let i = 0; i < 20; i++) {
                            const x = Math.random() * canvas.width;
                            const y = Math.random() * canvas.height;
                            const size = Math.random() * 10 + 2;
                            ctx.beginPath();
                            ctx.arc(x, y, size, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
